### MySql连接（join）

- 内连接：驱动表中的记录在被驱动表中找不到对应的数据，该记录不会被加到查询结果集（INNER JOIN）
- 外连接：被驱动表中查找不到的结果集加入查询结果；
  - 左连接：左边的表为驱动表（LEFT JOIN）
  - 右连接：右边的表为驱动表（RIGHT JOIN）



### MySql ON和WHERE区别

- 不符合where过滤条件的结果集都不显示， on如果被驱动表中无对应选项，使用NULL代替
- 先执行 ON，后执行 WHERE；ON 是建立关联关系，WHERE 是对关联关系的筛选。
- 外连接中必须使用ON建立连接关系
- 在内连接中，使用on等效于where



### 连接原理

- 笛卡儿积



### 连接算法

从硬盘取数据存入内存（I/O），所以数据量大的时候会使得查询效率很慢， 基于建立索引提升速度，驱动表的记录并不是所有列都会被放到`join buffer`中，只有查询列表中的列和过滤条件中的列才会被放到`join buffer`中，尽量不要用*作为查询条件

- 基于嵌套循环查询（for  for）
  - 对于驱动表查找出的每一条记录，去被驱动表查找相应的结果集（全表扫描）
- 对被驱动表需要查询的列建立索引（索引+回表  与 全表扫描效率对比）
- 基于块嵌套
  - 被驱动表的记录加载到内存的时候，一次性和多条驱动表中的记录做匹配
  - 将驱动表查询结果一部分存入join_buffer中， 从被驱动表查找相应的记录，后清除buffer；



- <https://www.jianshu.com/p/d923cf8ae25f>**待测试**