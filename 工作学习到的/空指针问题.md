### 空指针问题

2019.5.31 调试了两个半小时,教训深刻

```C++
int ChkOrderInfo_Nonoil(TranDataMem *pstTranDataMem, void *pvDbContext, ULONG *pulFlag)
{
    NetTran     *pstNetTran = NULL;
    TranData    *pstTranData    = NULL;
    PurchaseOrder *pstPurchaseOrder = NULL;
    //NonTran     *pstNonTran = NULL;
    NonTran     stNonTran;

    //memset(pstNonTran, 0x00, sizeof(NonTran));
    ....
 }
```

**上述代码注释中的问题**

- 给地址为NULL的空间初始化什么鬼???不崩溃才怪,把自己都写傻了;





#### 正确示例

```C++
#include <iostream>

struct MyStruct
{
    int a;
    char b;
};

int main()
{
    MyStruct *st = NULL;
    st = (MyStruct *)malloc(sizeof(MyStruct));
    memset(st, 0x00, sizeof(MyStruct));
    free(st); //内存泄漏这里产生
    st = NULL; //野指针在这里产生
    return 0;
}
```

